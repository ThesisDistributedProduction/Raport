% !TeX spellcheck = en_US
\chapter{Conclusion}
%Intro
Today, wind farms created by Siemens Wind Power has a centralized setup. Two central nodes exist in the wind farms, the Park Pilot and the Wind Power Supervisor. The Park Pilot is responsible for regulation of the power production of every turbine and for regulating the power production of the wind farm itself. The Wind Power Supervisor is responsible for data storage and external communication. The centralized approach to wind farm control poses a number of challenges for Siemens Wind Power.

The first challenge is a problem of scalability. The Park Pilot does not scale well with the number of turbines. This forces Siemens Wind Power to install several Park Pilots in one wind farm, in order to properly regulate the power production of the turbines and the wind farm itself.

The second challenge is a problem of availability. Using centralized components such as the Park Pilot and the Wind Power Supervisor introduces single points of failure in the wind farm. If a Park Pilot or the Wind Power Supervisor unexpectedly breaks down, parts of the wind farm are no longer available.

Thus, Siemens Wind Power wishes to increase the scalability and the availability of the wind farm setup by decentralizing the Park Pilots and the Wind Power Supervisor, such that their functionality is placed in the turbines.

%Feasibility
In order to investigate the feasibility of decentralizing the Park Pilots and the Wind Power Supervisor onto the turbines, the two components has been analyzed to identify the key services they provide.

The key service of the Park Pilots is to communicate with the turbines, in order to regulate their accumulated power production according to the power production setpoint of the wind farm. Thus, to decentralize the Park Pilots the turbines had to be able to communicate, such that each turbine's power production could be regulated according to the power production setpoint of the wind farm without a central Park Pilot.

The key services of the Wind Power Supervisor is to facilitate external communication and to aggregate and calculate aggregated values for the wind farm. Thus, to decentralize the Wind Power Supervisor the turbines had to be able to facilitate external communication as well as data aggregation across the wind farm.

\todo{Too much decentralized textz}Components able to provide decentralized communication, decentralized external communication and decentralized data aggregation and storage in a decentralized environment has been identified.
For decentralized communication between turbines, the RTI Connext Data Distribution Service for Real Time Systems (DDS) is recommended. DDS supports communication using the publish/subscribe paradigm without a centralized broker. Furthermore, DDS is able to use multicast for transmission of network packages, which limits the number of packages in the network thereby increasing the scalability of DDS.
For decentralized external communication Linux Virtual Server Project (LVS) is recommended. LVS is built into the Linux kernel and is capable of redirecting traffic on the data-link layer. This suggests outstanding performance in terms of packages forwarded per second. Similarly LVS facilitates direct communication between the turbine that the request is forwarded to and the external connection initiator.
For data storage and data aggregation MongoDB is recommended. MongoDB is able to scale horizontally, as well as do replication of data, such that in the event of a turbine failure data is neither lost nor unavailable. MongoDB supports sharding of a database which is important as the data aggregated across the wind farm will accumulate to a size that no single turbine is able to store.

Using the identified components above we conclude that it is feasible to decentralize the current wind farm setup of a Siemens Wind Power wind farm.

%Availability
Decentralizing the Park Pilots and the Wind Power Supervisor is expected to increase the availability of the wind farm. This puts certain requirements on the power regulation of the turbines, DDS, LVS and MongoDB.

Experiments show that the proposed decentralized solution is able to maintain wind farm power production in the face of turbine failures. Should a turbine become unavailable, the remaining turbines are regulated such that their power production increase in order to compensate for the unavailable turbine. Thus, internal communication handled by DDS is able to continue and the wind farm keeps operating despite turbine failure.

LVS and MongoDB has not been implemented in the proposed decentralized solution, but they have been chosen partly because of their ability to uphold availability in a decentralized setup. LVS has the ability to detect load balancer failure by monitoring heartbeats from the load balancer that is currently handling external connections. Should the heartbeats cease to be sent, another load balancer will take over and continue. MongoDB is capable of replicating a databases across nodes. Thus, data collected on one turbine can be replicated to a number of other turbines. Should a turbine become unavailable the data collected on the unavailable turbine will still be accessible because it is replicated to other turbines.

By the experiment performed and the abilities of maintaining operation in spite of node failure of LVS and MongoDB, we conclude that removing one or more turbines from the system at runtime will not cause system failure. Decentralizing the current wind farm setup of a Siemens Wind Power wind farm will increase availability by removing the single points of failure embodied by the Park Pilots and the Wind Power Supervisor. By introducing failure resistant components capable of providing the same services as the Park Pilots and the Wind Power Supervisor, the availability of the wind farm will be further increased.

%Scalability
Decentralizing the Park Pilots and the Wind Power supervisor is expected to increase scalability as well as availability.

%The results of the experiments performed with regards to scalability shows that the proposed decentralized solution scales near constant with the number of turbines in terms of regulation cycle time.
The test setup for testing the scalability of the proposed decentralized solution imposed certain limitations, with regards to the maximum number of turbines the experiments could be performed on, which is reflected in the results. Disregarding results, that was a direct consequence of the limited test setup, a trend emerged. The regulation cycle time of the decentralized solution scales near constant with the number of turbines. This was expected as the decentralized solution was designed with the goal of removing the linear dependency between the number of turbines and the regulation cycle time, by making reception of turbine states happen in parallel with the regulation cycle using Connext DDS. In order to make sure regulation is performed using relevant data only, a time limit was introduced to remove stale states. A certain trade off had to be made in order to achieve near constant scalability. This trade off was in the form of cache reads.
%Cache reads happens when a turbine does not manage to update other turbines about it's current state between regulation cycles. 
Cache reads happens when a turbine does not manage to update other turbines with it's current state before the next regulation cycle starts. This forces the other turbines to read the turbine's state from cache, resulting in the same state being possibly used multiple times for regulation. The introduction of cache reads in combination with keeping a constant regulation time independent from the number of turbines is preferred over waiting for the missing states to be delivered.

\todo{Ikke helt tilfreds. Noget med trade off mellem cache reads, number of turbines og sleep time}Detaching the regulation cycle time from the number of turbines has not been completely achieved as the state of one turbine must be calculated with the use of the states of every other turbine in the wind farm. The overhead associated with this calculation though, is low enough that it is not visible in the result sets. What is visible from the result sets is that choosing the correct sleep time of the regulation cycles and accepting a number of cache reads, the time of network communication can be factored out of the regulation cycle time for the majority of the regulation cycles.

%Performance
A performance comparison between the decentralized solution and the current Siemens system, in terms of number of turbines per Park Pilot, was not an option, since it was not possible to recreate the test environment Siemens Wind Power uses to test their current system. To enable a comparison a centralized solution was created. The proposed centralized solution was created to closely mirror the behavior of the current Siemens system, with regards to the steps of the regulation cycle and the centralized architecture. Thus, comparing the scalability of the centralized solution to the decentralized solution gave a rough estimate of how a decentralized version of the current Siemens system compares to the current Siemens system.

In order to compare the centralized and the decentralized solutions the scalability, with regards to number of turbines was measured on the centralized solution. Again the test setup imposed certain limits on the experiments. Disregarding the results that was a direct consequence of the limited test setup, it was found that the regulation cycle time of the centralized solution was linear with the number of turbines with a factor of 1.667 ms extra regulation cycle time for every turbine added.

From the experiments performed we have a strong indication that the decentralized solution scales better than the centralized solution. Compared directly on regulation cycle time the scalability of the decentralized solution, which is nearly constant, is an overwhelming improvement. Because of the limitations of the test setup we cannot safely conclude that the scalability of the decentralized solution is better than the centralized solution. Further experiments must be performed in order to make sure that the indications of this experiment is correct.

%Summary and beautifull ending
%This thesis has explored the feasibility of decentralizing the setup of a Simens Wind Power wind farm. It has been proven that it is feasible to decentralize the current wind farm setup of a Siemens Wind Power wind farm and in addition gain a number of advantages. By decentralizing the current wind farm setup it is possible to increase the scalability and availability of the wind farm. Thus,
This thesis has explored the consequences of decentralizing a Siemens Wind Power wind farm. It has been shown that decentralizing a Siemens Wind Power wind farm is feasible. This has been done by identifying state of the art software components suitable for operation in a decentralized system. A prototype of both a centralized and decentralized wind farm has been created in order to compare differences in scalability and availability of the two. It has been indicated that the scalability of the decentralized solution is near constant, within the boundaries of the test setup used, and thus an improvement compared to the centralized solution. The availability of the decentralized solution is increased as it does not contain any single points of failure as opposed to the centralized solution. The potential gain of decentralizing a Siemens Wind Power wind farm is a robust system, capable of tolerating failures and able to scale to a high number of turbines without the need of additional support infrastructure.\todo{Hvad med router og anden udfrakommende, er det ikke inkluderet med den formulering?}